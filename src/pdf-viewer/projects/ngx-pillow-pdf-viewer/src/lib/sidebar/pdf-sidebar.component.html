<lib-west-resizeable
    [enabled]="expanded"
    [shouldResize]="sidebarWidthShouldResize"
    (widthChanged)="onSidebarWidthChanged($event)">

    <div
        [@expandCollapse]="{ value: expanded ? 'expand' : 'collapse', params: { expandedWidth: expandedSidebarWidth }}"
        class="full-height annotation-container">

        <div class="flex">
            <button *ngIf="!expanded"
                class="toolbar-button"
                id="expand-sidebar"
                [disabled]="pdfjsContext?.fileState !== 'loaded'"
                [title]="'expand'"
                (click)="expand()">
            </button>

            <lib-close-button *ngIf="expanded"
                (closed)="collapse()"/>
        </div>

        <div [ngClass]="{'hidden': !expanded}">
            <div *ngIf="loading"
                class="loading-indicator">
                <lib-loading-ring></lib-loading-ring>
            </div>
            <ol *ngIf="!loading">
                <!-- Pending annotation -->
                <li *ngIf="uncompletedAnnotation">
                    <lib-pdf-annotation #annotation
                        [loggingProvider]="loggingProvider"
                        [annotation]="uncompletedAnnotation">

                    </lib-pdf-annotation>
                </li>

                <!-- Other annotations -->
                <li *ngFor="let annotation of completedAnnotations">
                    <lib-pdf-annotation #annotation
                        [loggingProvider]="loggingProvider"
                        [annotation]="annotation">

                    </lib-pdf-annotation>
                </li>
            </ol>
        </div>
    </div>
</lib-west-resizeable>