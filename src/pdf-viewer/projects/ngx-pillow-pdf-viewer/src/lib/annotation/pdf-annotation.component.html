<div *ngIf="annotation"
    (click)="expanded ? collapse() : expand()"
    class="annotation-container"
    attr.data-annotation="{{annotation.id}}">

    <header>
        <p class="font-bold">{{annotation.dateCreated | date: 'h:mm:ss'}}</p>
    </header>

    <div [ngClass]="{'hidden': !expanded}">
        <blockquote class="quote" *ngIf="annotation.type === 'text'">
            <ng-container *ngIf="annotation.reference?.selectedText">
                <p>{{annotation.reference?.selectedText}}</p>
            </ng-container>
            <ng-container *ngIf="!annotation.reference?.selectedText">
                <p>...</p>
            </ng-container>
        </blockquote>

        <!-- Comment form -->
        <form libClickStopPropagation *ngIf="annotation.reference"
            class="form">

            <input
                attr.data-annotation-input="{{annotation.id}}"
                type="text"
                aria-label="Comment input" />
            <input type="submit" role="button" (click)="onSubmit()" value="Post" />
        </form>
    </div>
</div>